const allContent = [
  { 
    title: `Intro`,
    text:  `One time someone asked me: "You mean that we could be able to see other planets, if we just look to the sky?". I asked in reply: "What do you think, how did ancient greeks named them, if they hadn't telescopes?". Indeed we can to see rather more than just planets. But there are some conditions, which must be satisfied, and the telescope is far from being the first of them.
The first and main condition for sky observing is a PITCH DARKNESS. Even if you had a telescope with a one-meter mirror, the most part of the sky would become invisible for you, and things, which would be still visible, would become horribly non-contrast. It would be like a searching the green frog in the green swamp, with only difference, that a brightness would be blured instead a color. If you don't see the Milky Way, you don't see a stuff.
Furthermore, even if you are outside the city, as soon as the full moon risen the astronomical climath worsens sharply. Yes, the sky still seems black, but don't let yourself be deceived - it's a half daytime now. That's why you should decide what to admire - magnificient craters or a deep space. By the way, one more fallacy - looking on the full moon isn't interesting too. As is known, shadows disappear at noon, and a noon on the Moon comes at full moon. Without shadows craters look also absolutely non-contrast and the moon seems blured. So, the best time for the moon is it's first quarter, when shadows are maximal. (Also a third quarter is good, but it comes closely to a dawn - do you realy need this?).
Even on condition of a dark sky, a telescope with the maximal increase isn't a perfect image recipe.  Because, the more large image we make, the more pale it become, so it's necessary to keep a balance. And sizes often doesn't interfere an observation - there are a whole bunch of pretty large objects, which could be seen without a telescope at all, if not for their brightness. The instrument just allows to increase this brightness.
Finally, about colors: because of small brightness of space objects the power of color-sensitive cells in our eyes is not enough, so we see them with the black-white part of the retina. That's why the color is a lottery, which depends of concurrence of an increase rate of the telescope and current object. Probably you would be able to notice blue and green shades, but it can be that you would get lucky with red. But absolutely for sure you wouldn't see in the sky the things as that is depicted on this slide's background! Because it's a pseudo-colors. Artificially handled picture, where areas are highlighted with colors for contrast, although these areas were photographed in infra-red or ultraviolet at all. Or in something even more exotic. That's why, viewing beautiful photos in internet, learn to separate that what the space actualy looks like from special scientific illustrations. Here presicely first type photos are collected.`,
    info: `Image information:
The Pillars of Creation
Author: NASA, ESA, and the Hubble Heritage Team (STScI/AURA)
https://commons.wikimedia.org/wiki/File:Pillars_2014_HST_denoise_0.6_12.jpg
Public domain.
Original image were resized and optimized for web.`,
    imgWidth: {
      xl: 1920,
    },
    imgHeight: {
      xl: 2002,
    }
  },  
  { 
    title: `The Orion Nebula`,
    text:  `This is our first object, and it's a sole full actual nebula in the list - a huge cloud of gas and dust. Gas usually shines with blue or red light. Blue light is a light with what our native blue sky shines - mechanism is the same. Red light flies throug the cloud, but blue highlights the gas as on the laser show, whereis spotlight's role is played by stars inside this cloud.
But if the gas shines red, this means that there's no need in a spotlight anymore - gas is incandescent and glows completely by itself as a heated iron. As usual the gas is hot for a reason - new stars are born somewhere nearby.
And what about the dust? It ususally casts black shadows on all of this. One of the most famous dust nebula - the Horse Head - is located just not far from the Orion Nebula, but it could be seen only with an average power telescope. And the Orion Nebula can be seen just by eyes as misty spot. With telescope it's looks better of course.
The Orion Nebula is one of the most close to us areas of star formation, a part of much larger area, which is consisted of the the Barnard Loop, the Eagle Nebula (right there are located famous Pillars of Creation, photographed by the Hubble telescope and shown on the first slide's background), the Christmas Tree Nebula and many more other scattered over the large space in constellations of Orion and neighboring him Unicorn.`,
    info: `Image information:
Author: Rawastrodata
https://commons.wikimedia.org/wiki/File:The_Orion_Nebula_M42.jpg
Distributed under Creative Commons license.
Original image were resized and optimized for web.`,
    imgWidth: {
      xl: 1920
    },
    imgHeight: {
      xl: 1203
    }
  },
  { 
    title: `The Praesepe Cluster`,
    text:  `The most known name of this star cluster - the Beehive, but I like ancient greek variant more. Greeks saw heads of two rams leaning over the feeder. But in reality the large amorphous group of stars hangs there. Far enough to allow us distinguish separate stars, but huge enough to look like a big (the size of the full moon), bright (as the Milky Way - it's impossible not to make a reservations) spot.
Because of fact that the stars in such groups are not seen separately without instruments, star clusters from the beginning went to the same lists with nebulae. Open clusters are the easiest objects for observing, but the least exotic. The brightest member of them are the Pleiades aka the Seven Sisters aka the Subaru (yep, exactly that are on the emblem). Without any telescope even in average-lighted town they are clearly visible as a small dipper. But I didn't choose them for this list because misty glowing of the Pleiades can be observed only with telescope, and the Praesepe are visible without it.`,
    info: `Image information:
Author: Stuart Heggie
https://www.jpl.nasa.gov/spaceimages/details.php?id=PIA15801
Distributed under Creative Commons license.
Original image were resized and optimized for web.`,
    imgWidth: {
      xl: 1920
    },
    imgHeight: {
      xl: 1920
    }
  },
  { 
    title: `The Andromeda Galaxy`,
    text:  `Very often this galaxy is called as the Andromeda Nebula, but this is a historical artifact. When it became possible to see separate stars, it had become clear that this is not just a gas cloud. And when intensities of star flashes were measured, it had become obvious that this object is out of our Galaxy borders, i.e. is a galaxy itself.
Despite that this name is perhaps the most heard among the people, which are far from astronomy, the Andromeda Galaxy is a pale object. It's difficult to see it on the sky, galaxy gives itself away by faint glow without outlined edges, which looks more or less contrastly only with peripheral vision using.
Moreover, the thing which one is able to see, is only a little part, the most bright place in the center. Entirely the Andromeda Galaxy is visually wider than full moon for seven times. But colossal distance leads to the fact that for the Earth belongs a tiny part of light, which originally took off in the direction of this vanishingly small dot. It's easy to miss us, if you fly from a distance of millions of light years.
The Andromeda galaxy is the most bright and almost the only galaxy, which is visible for eyes. Of course there are the Magellanic Clouds, but they are available only for southerners, and yes, they are satellite galaxies of the Milky Way - one can say that they are not independent galaxies at all. And the Triangulum Galaxy is so vanishingly faint, that despite the good location in the sky, for observing it's necessary to drive to some mountain desert. If you have a telescope, you can try yor luck with the Big Spiral and the Cigar - two galaxies in one field of view! But do not flatter yourself - they will also be pale.`,
    info: `Image information:
Author: Adam Evans
https://www.flickr.com/photos/astroporn/4999978603/
Distributed under Creative Commons license.
Original image were resized and optimized for web.`,
    imgWidth: {
      xl: 1920
    },
    imgHeight: {
      xl: 1261
    }
  },
  { 
    title: `The Hercules Cluster`,
    text:  `The member of class of space objects, after looking at one them there's no need to look at others. Of course it's a joke, but in general all globular clusters are more or less the same - it would be almost perfect misty circle.
But everything is very serious in practice. Globular clusters are huge groups of tens and even hundreds of thouthands of stars, which located at far edges of the Galaxy. They are visible for us only because they are so large. Moreover they are also very ancient because have formed when the Milky Way was young, and that's why there are a lot of old red stars there nowadays. While these stars have very specific spectres, since at the dawn of everything in the Galaxy any heavy elements like iron or uranus haven't arose, there were no even simple carbon and sodium. For their arising the life of first supermassive stars had to cut short, and before that first stars were consisted only of hydrogen and helium. This chtmical composition we can observe in globular clusters till now.
Of cource I exaggerated about sameness - among globular clusters diverse forms can be found: more uniform or with more densed center, with "arms" of stars, more red, more granular, more flattened, etc. But these details more likely would be seen by a man, who spend many hours in comparison.
Alas, the most bright globular cluster - the Omega Centauri - also is available only for southerners, that's why we have to be sutisfied by #2 - the Hercules Cluster. Eyes are not enough to see it already, there's need at least for binoculars. Otherwise it's easy to find if you know the side in which you have to look - there would be a bright misty circle.`,
    info: `Image information:
Author: Rawastrodata
https://commons.wikimedia.org/wiki/File:Messier_13_Wide_Field.jpg
Distributed under Creative Commons license.
Original image were resized and optimized for web.`,
    imgWidth: {
      xl: 1920
    },
    imgHeight: {
      xl: 1218
    }
  },
  { 
    title: `The Ring Nebula`,
    text:  `The most tiny crumb, which I couldn't pass by just because it will present one more rich class of ojects - planetary nebulae. Unlike "Andromeda Nebula" these nebulae are rather more close inherently to usual ones, but there is also a fundamental difference. Nebulae like the Orion Nebula are the huge interstellar objects, which are located pretty far from us.
Planetary nebulae to the contrary are small - they are gas clouds in a neighborhood of single stars, with sizes about our Solar system (plus-minus an order of magnitude - couldn't to skip this chaotic claryfication). In fact this is an upper layer, which the star trow off itself because of old age. This layer starts to scatter in all directions like a bubble, and the star shines on it from inside, thus interesting effects appear. Due to their modest size, all planetary nebulae that we see are available fo us only thereby their proxymity.
From where did the name "planetary nebula" come then, what's the deal with planets? The thing is when deep space objects just started to be observed, planetary nebulae looked in telescope like semi-opaque circles, almost as usual planets (except the opacity). Names tell for themselves: the Saturn Nebula, the Jupiter's Ghost Nebula... One more effect: sometimes central star is bright enough and it's impossible to see the nebula looking directly on it. But as soon as one turns eyes away the nebula flares up in periferal vision. One of nebulae is called the Blinking Planetary because of this.
In case of our object central star is inconspicious and we can see something like a bagel, the hole in which can be clearly catched with the periferal vision. The Ring is quiet bright object, the next one similar - the Dumbbell Nebula, which is located nearby, is quiet more pale. At the same time both of them, as all planetary nebulae, are very small, that's why in this case there's nothing to do without a telescope.`,
    info: `Image information:
    Author: Silasmawd
https://commons.wikimedia.org/wiki/File:M57.jpg
Distributed under Creative Commons license.
Original image were resized and optimized for web.`,
    imgWidth: {
      xl: 1920
    },
    imgHeight: {
      xl: 1920
    }
  }
]

const components = {
  $body: {},
  $menuButton: {},
  $navigation: {},
  $main: {}
}

function getComponentsFromPage() {
  components.$body = document.body;
  components.$menuButton = document.querySelector('.aside__button');
  components.$navigation = document.querySelector('.navigation');
  components.$main = document.querySelector('.main');
}

function createMenu($container, allContent) {
  const menuItemsHTML = allContent.map((article, index) => `<li class="navigation__item" data-index="${index}">${article.title}</li>`)
                                  .join('\n');
  const menuHTML = `<ul class="navigation__list">${menuItemsHTML}</ul>`
  $container.insertAdjacentHTML('beforeend', menuHTML);
}

function selectArticle(event) {
  if(event.target.tagName != 'LI') return;

  components.$main.innerHTML = '';
  components.$body.scrollIntoView();
  showArticle(components.$main, allContent, Number(event.target.dataset.index));
  toggleInterface(event);
}

function toggleInterface(event) {
  components.$navigation.classList.toggle('hidden');
  components.$main.classList.toggle('hidden');
  document.body.classList.toggle('blocked');
}

function toSnakeCase(string) {
  return string.toLowerCase()
               .replace(/ /g, '_');
}

function getImgSize() {
  const deviceSize = Math.max(document.documentElement.clientWidth, document.documentElement.clientHeight);
  if (deviceSize < 576) {
    return 'xs';
  } else if (deviceSize < 768) {
    return 'sm';
  } else if (deviceSize < 992) {
    return 'md';
  } else if (deviceSize < 1200) {
    return 'lg';
  }
  return 'xl';
}

function splitParagraphs(string, htmlClass) {
  return string.split('\n')
               .map(paragraph => paragraph.startsWith('http') 
                  ? `<p class="${htmlClass}">
                      <a href="${paragraph}" class="${htmlClass}-link" target="_blank">Link to original</a>
                    </p>` 
                  : `<p class="${htmlClass}">${paragraph}</p>`)
               .join('\n');
}

function showArticle($container, allContent, index = 0) {
  const {title, text, info, imgWidth: width, imgHeight: height} = allContent[index];
  const imgSize = getImgSize();
  $container.insertAdjacentHTML('beforeend', `
  <img src="./img/${toSnakeCase(title)}-${imgSize}.jpg" class="main__img" width="${width[imgSize]}" height="${height[imgSize]}" alt="${title}">
  <section class="article">
    <h2 class="article__title">${title}</h2>
    ${splitParagraphs(text, 'article__text')}
    ${splitParagraphs(info, 'article__img-info')}
  </section>
  `)
}

document.addEventListener('DOMContentLoaded', function(event) {
  getComponentsFromPage();
  createMenu(components.$navigation, allContent);
  components.$navigation.addEventListener('click', selectArticle);
  components.$menuButton.addEventListener('click', toggleInterface)
  showArticle(components.$main, allContent);
});
